!function(a,b,c){"use strict";function d(a){var e=!1,f=1;return"boolean"==typeof a&&(e=a,a=arguments[1]||{},f++),b.forEach([].slice.call(arguments,f),function(f){var g,h,i,j,k;for(j in f)k=a[j],i=f[j],a!==i&&(e&&i&&(b.isObject(i)||(g=b.isArray(i)))?(h=g?k&&b.isArray(k)?k:[]:k&&b.isObject(k)?k:{},a[j]=d(e,h,i)):i!==c&&(a[j]=i))}),a}b.module("darthwade.dwLoading",[]).value("dwLoadingOptions",{active:!1,text:"Loading...",className:"",overlay:!0,spinner:!0,spinnerOptions:{lines:12,length:7,width:4,radius:10,rotate:0,corners:1,color:"#000",direction:1,speed:2,trail:100,opacity:.25,fps:20,zIndex:2e9,className:"dw-spinner",top:"auto",left:"auto",position:"relative"}}).service("dwLoading",["$rootScope","dwLoadingOptions",function(a,b){var c=this;c.setDefaultOptions=function(a){d(!0,b,a)},c.start=function(b){a.$broadcast("$dwLoadingStart",b)},c.finish=function(b){a.$broadcast("$dwLoadingFinish",b)}}]).factory("$loading",["dwLoading",function(a){return a}]).directive("dwLoading",["$window","$compile","dwLoadingOptions",function(a,c,e){return{scope:!0,link:function(c,f,g){c.spinner=null,c.key=g.dwLoading||!1,c.start=function(){c.container&&c.container.addClass("dw-loading-active"),c.spinner&&c.spinner.spin(c.spinnerContainer[0])},c.finish=function(){c.container&&c.container.removeClass("dw-loading-active"),c.spinner&&c.spinner.stop()},c.$watch(g.dwLoadingOptions,function(g){c.finish(),c.options=d(!0,{},e,g);var h=b.element("<div></div>").addClass("dw-loading-body");if(c.container=b.element("<div></div>").addClass("dw-loading").append(h),c.options.overlay&&c.container.addClass("dw-loading-overlay"),c.options.className&&c.container.addClass(c.options.className),c.options.spinner&&(c.spinnerContainer=b.element("<div></div>").addClass("dw-loading-spinner"),h.append(c.spinnerContainer),c.spinner=new a.Spinner(c.options.spinnerOptions)),c.options.text){var i=b.element("<div></div>").addClass("dw-loading-text").text(c.options.text);h.append(i)}f.append(c.container),(c.options.active||!c.key)&&c.start()},!0),c.$on("$dwLoadingStart",function(a,b){b===c.key&&c.start()}),c.$on("$dwLoadingFinish",function(a,b){b===c.key&&c.finish()}),c.$on("$destroy",function(){c.finish(),c.spinner=null})}}}])}(window,window.angular);